<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MIRA ¬∑ Asistente IA ‚Äî Innova Space Education</title>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-P64ZZSCZ7Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-P64ZZSCZ7Z');
  </script>

  <!-- Fuentes (mismas que la p√°gina CEO) -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Tailwind + librer√≠as -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    /* Tipograf√≠a global estilo Innova Space */
    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    h1, h2, h3, h4 {
      font-family: "Orbitron", system-ui, sans-serif;
      letter-spacing: 0.04em;
    }

    /* Fondo espacial suave (similar al ceo) */
    .bg-space {
      background: radial-gradient(circle at 0 0, rgba(56,189,248,0.13), transparent 55%),
                  radial-gradient(circle at 100% 0, rgba(244,114,182,0.12), transparent 55%),
                  radial-gradient(circle at 0 100%, rgba(129,140,248,0.12), transparent 55%),
                  linear-gradient(to bottom right, #020617, #020617, #1e1b4b, #4c1d95);
    }

    /* Tarjeta ‚Äúglass‚Äù para el chat */
    .glass-card {
      background: rgba(15,23,42,0.9);
      border-radius: 1.5rem;
      border: 1px solid rgba(168,85,247,0.7);
      box-shadow: 0 24px 80px rgba(15,23,42,0.9);
      backdrop-filter: blur(18px);
    }

    /* Avatar MIRA */
    #avatar-mira {
      display: inline-block;
      vertical-align: middle;
      width: 60px;
      height: 60px;
      margin-left: 15px;
      margin-bottom: 8px;
      transition: filter 0.3s, opacity 0.3s;
      opacity: 1;
      filter: grayscale(0.4) brightness(0.8);
    }
    #avatar-mira.pulse {
      animation: halo-glow 1.2s infinite alternate;
      filter: drop-shadow(0 0 16px #a855f7) brightness(1.25);
      opacity: 1;
    }
    @keyframes halo-glow {
      from { filter: drop-shadow(0 0 12px #4f46e5) brightness(1.18); }
      to   { filter: drop-shadow(0 0 36px #38bdf8) brightness(1.45); }
    }

    @media (max-width: 600px) {
      #avatar-mira { width: 40px; height: 40px; margin-left: 5px; }
      #chat-box { font-size: 0.96rem;}
      .max-w-3xl { max-width: 98vw;}
    }

    /* Markdown dentro del chat */
    .chat-markdown table {
      border-collapse: collapse; margin: 0.5em 0;
      width: 100%;
      background: #1f2937;
      color: #f9fafb;
      font-size: 0.97rem;
    }
    .chat-markdown th, .chat-markdown td {
      border: 1px solid #7f5af0;
      padding: 6px 10px;
      text-align: left;
    }
    .chat-markdown th { background: #4f378b; }
    mjx-container[jax="CHTML"] {
      font-size: 1.25em;
      background: transparent !important;
      padding: 0.12em 0.2em;
      margin: 0.35em 0;
    }

    .credits {
      font-size: 1.1em;
      color: #bbcbff;
      text-align: center;
      padding-bottom: 2em;
      opacity: 0.85;
      letter-spacing: 0.03em;
    }
    .credits strong {
      color: #fff;
      font-weight: 700;
      letter-spacing: 0.05em;
    }

    /* Ventana flotante ‚ÄúQui√©n es MIRA‚Äù */
    #mira-info {
      z-index: 50;
      box-shadow: 0 6px 32px #23104a;
      border-radius: 1.2rem;
      background: #232146;
      border: 2px solid #a855f7;
      color: #fff;
      max-width: 420px;
      width: 92vw;
      padding: 2.1rem 1.3rem 1.3rem 1.3rem;
      text-align: center;
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%,-50%);
      display: none;
      transition: opacity .2s;
    }
    #mira-info h3 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    #mira-info button {
      margin-top: 1.5rem;
      background: #a855f7;
      color: #fff;
      padding: 0.5rem 1.3rem;
      border-radius: 0.6rem;
      font-weight: 500;
    }
  </style>
</head>

<body class="bg-space text-white scroll-smooth min-h-screen flex flex-col">

  <!-- NAVBAR estilo Innova -->
  <header class="w-full z-20">
    <div class="max-w-6xl mx-auto flex items-center justify-between px-5 py-4">
      <div class="flex items-center gap-3">
        <img src="logo.png" alt="Logo Innova Space" class="w-12 h-12 rounded-full border border-purple-400/70 shadow-lg">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-indigo-200/80">Innova Space Education SPA</p>
          <h1 class="text-lg sm:text-xl font-semibold text-white">
            MIRA ¬∑ Asistente Virtual
          </h1>
        </div>
      </div>
      <nav class="hidden sm:flex items-center gap-3 text-sm font-medium">
        <a href="https://innova-space-edu.cl" class="px-3 py-1.5 rounded-full border border-indigo-400/70 hover:bg-indigo-500/20 transition">
          Volver a Innova
        </a>
        <a href="https://innova-space-edu.cl/#contacto" class="px-3 py-1.5 rounded-full bg-pink-500 hover:bg-pink-600 transition shadow-lg shadow-pink-500/40">
          Contacto
        </a>
      </nav>
    </div>
  </header>

  <!-- HERO / TITULAR -->
  <section class="pt-4 pb-6 text-center relative z-10 px-4">
    <h2 class="text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 text-transparent bg-clip-text">
      Innova Space Education
    </h2>
    <p class="text-lg text-indigo-100 mt-3 max-w-2xl mx-auto">
      Educaci√≥n del futuro, con MIRA como asistente IA para apoyar a estudiantes y docentes.
    </p>
  </section>

  <!-- CONTENIDO PRINCIPAL: chat + info -->
  <main class="flex-1 px-4 pb-12">
    <section class="max-w-6xl mx-auto grid md:grid-cols-[1.2fr,1.1fr] gap-8 items-start">

      <!-- Columna INFO / √ÅREAS -->
      <div class="space-y-8">
        <div class="glass-card p-6 md:p-7">
          <div class="flex items-center justify-center md:justify-start gap-3 mb-4">
            <h2 class="text-3xl font-bold mb-0">Asistente IA - MIRA</h2>
            <object
              id="avatar-mira"
              type="image/svg+xml"
              data="avatar_mira.svg"
              class="still"
              tabindex="-1"
              aria-hidden="true"></object>
          </div>
          <p class="text-indigo-100 text-sm md:text-base mb-4">
            <strong>MIRA</strong> es la asistente virtual creada por <strong>Innova Space Education SPA</strong>.
            Est√° dise√±ada para explicar contenidos, resolver dudas y acompa√±ar procesos de aprendizaje en todas las √°reas escolares.
          </p>
          <p class="text-sm md:text-base text-indigo-100/90">
            Puedes preguntarle por f√≥rmulas, problemas, res√∫menes, explicaciones paso a paso y aplicaciones pr√°cticas.
            MIRA responde en espa√±ol, con voz natural y estructura pensada para ser le√≠da o escuchada f√°cilmente.
          </p>
          <div class="flex flex-wrap justify-center md:justify-start gap-2 mt-5 text-xs md:text-sm">
            <span class="px-3 py-1 rounded-full bg-indigo-500/30 border border-indigo-300/60">Explicaciones claras</span>
            <span class="px-3 py-1 rounded-full bg-purple-500/30 border border-purple-300/60">Soporte en todas las materias</span>
            <span class="px-3 py-1 rounded-full bg-pink-500/30 border border-pink-300/60">Voz femenina natural</span>
          </div>
          <!-- Bot√≥n ¬øQui√©n es MIRA? debajo -->
          <div class="flex justify-center md:justify-start mt-6">
            <button onclick="toggleMiraInfo()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full shadow-lg shadow-blue-500/40 text-sm font-semibold">
              ¬øQui√©n es MIRA?
            </button>
          </div>
        </div>

        <!-- √Åreas que responde MIRA (mismo contenido, estilo Innova) -->
        <section class="glass-card p-6 md:p-7 bg-indigo-900/60">
          <h3 class="text-2xl font-semibold mb-4 text-center md:text-left">√Åreas que responde MIRA</h3>
          <div class="text-center md:text-left">
            <button onclick="toggleAreas()" class="bg-purple-700 px-5 py-2.5 rounded-lg font-semibold mb-4 text-white shadow-lg shadow-purple-500/40 text-sm">
              Ver √°reas que responde MIRA
            </button>
          </div>
          <div id="areas-list" class="hidden mt-3">
            <ul class="text-sm md:text-base space-y-1 text-indigo-100">
              <li>üìê Matem√°ticas</li>
              <li>üß≤ F√≠sica</li>
              <li>‚öóÔ∏è Qu√≠mica</li>
              <li>üß¨ Biolog√≠a</li>
              <li>üåé Historia</li>
              <li>üó∫Ô∏è Geograf√≠a</li>
              <li>üìö Lenguaje</li>
              <li>üó£Ô∏è Ingl√©s</li>
              <li>üé® Artes Visuales</li>
              <li>üéº M√∫sica</li>
              <li>üèÉ Educaci√≥n F√≠sica</li>
              <li>üí≠ Filosof√≠a</li>
              <li>üíª Tecnolog√≠a</li>
              <li>ü§ù Orientaci√≥n</li>
            </ul>
          </div>
        </section>

        <!-- Qui√©nes somos + contacto breve (mantengo secciones) -->
        <section class="glass-card p-6 md:p-7 bg-indigo-900/70">
          <h3 class="text-2xl font-semibold mb-3 text-center md:text-left">¬øQui√©nes somos?</h3>
          <p class="text-sm md:text-base text-indigo-100">
            Innova Space Education SPA es una plataforma educativa que integra inteligencia artificial, desarrollo web
            y dise√±o futurista para apoyar el aprendizaje en colegios e instituciones de Chile.
          </p>
        </section>

        <section class="glass-card p-6 md:p-7 bg-indigo-900/70">
          <h3 class="text-2xl font-semibold mb-3 text-center md:text-left">Cont√°ctanos</h3>
          <p class="text-sm md:text-base text-indigo-100 mb-1">
            Correo: <span class="font-semibold">contacto@innova-space-edu.cl</span>
          </p>
          <p class="text-sm md:text-base text-indigo-100">
            Tambi√©n puedes escribirnos desde el formulario en el sitio principal de Innova Space Education.
          </p>
        </section>
      </div>

      <!-- Columna CHAT -->
      <section class="pt-2">
        <div class="glass-card p-4 md:p-6">
          <h2 class="text-2xl md:text-3xl font-semibold mb-4 text-center">
            Habla con MIRA
          </h2>
          <p class="text-xs md:text-sm text-center text-indigo-100/90 mb-4 px-2">
            Escribe tu duda o tema, por ejemplo: <em>‚ÄúExpl√≠came la ley de Ohm paso a paso‚Äù</em> o
            <em>‚ÄúAy√∫dame con un problema de probabilidad‚Äù</em>.
          </p>

          <div class="bg-gray-900/80 border border-purple-500/60 rounded-xl p-4 shadow-inner relative">
            <div id="chat-box"
                 class="h-72 md:h-80 overflow-y-auto bg-gray-800/90 p-3 rounded-md mb-4 text-sm space-y-2 text-white chat-markdown"
                 aria-live="polite">
              <div>
                <strong>MIRA:</strong> ¬°Hola! Soy MIRA, tu asistente virtual. ¬øEn qu√© puedo ayudarte hoy?
              </div>
            </div>
            <div class="flex gap-2">
              <input
                aria-label="Escribe tu mensaje"
                type="text" id="user-input"
                placeholder="Escribe tu mensaje..."
                class="flex-1 p-2 rounded-md bg-gray-700 text-white border border-gray-600 text-sm"
                autocomplete="off"
                onkeydown="if(event.key==='Enter'){sendMessage();return false;}"
              >
              <button
                id="send-btn"
                onclick="sendMessage()"
                class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md text-white font-bold text-sm"
                tabindex="0">
                Enviar
              </button>
            </div>
          </div>
        </div>
      </section>
    </section>
  </main>

  <!-- Logo y cr√©ditos al final -->
  <footer class="mt-6">
    <div class="flex flex-col justify-center items-center py-8 gap-3">
      <img src="logo.png" alt="Logo Innova Space" style="max-width:170px; width: 40vw; height:auto; opacity:0.95;">
      <div class="credits">
        Creado por <strong>Innova Space Edu SpA.</strong>.
      </div>
    </div>
  </footer>

  <!-- Ventana flotante de descripci√≥n de MIRA -->
  <div id="mira-info">
    <h3>¬øQui√©n es MIRA?</h3>
    <p class="text-base mb-4">
      <strong>MIRA</strong> (Modular Intelligent Responsive Assistant), en espa√±ol: Asistente Modular, Inteligente y Reactivo.<br>
      Creada por <strong>Innova Space</strong> con tecnolog√≠a <strong>OpenAI</strong>.<br>
      Dise√±ada para acompa√±ar, explicar y ayudar a estudiantes y docentes de forma interactiva y personalizada en todas las materias.<br>
      Su misi√≥n es facilitar el aprendizaje, responder dudas, explicar f√≥rmulas y conceptos, y guiarte en tu avance acad√©mico, con explicaciones claras y amigables.
    </p>
    <button onclick="toggleMiraInfo()">Cerrar</button>
  </div>

  <!-- Scripts auxiliares -->
  <script>
    function toggleMiraInfo() {
      const info = document.getElementById("mira-info");
      info.style.display = (info.style.display === "none" || info.style.display === "") ? "block" : "none";
    }
    function toggleAreas() {
      const list = document.getElementById("areas-list");
      list.classList.toggle("hidden");
    }
  </script>

  <!-- L√≥gica del chat -->
  <script src="chat.js"></script>

  <!-- Integraci√≥n LaTeX + Markdown para el chat -->
  <script>
    // Sobreescribe funci√≥n para mostrar mensajes de la IA con Markdown + MathJax
    function addAssistantMessage(text) {
      const chatBox = document.getElementById('chat-box');
      // Convierte Markdown a HTML (tablas, listas, negritas, etc.)
      const html = `<div class="assistant-msg">${marked.parse(text)}</div>`;
      chatBox.insertAdjacentHTML('beforeend', html);
      // Desplaza el chat al final
      chatBox.scrollTop = chatBox.scrollHeight;
      // Procesa LaTeX con MathJax
      if (window.MathJax) {
        setTimeout(() => MathJax.typesetPromise(), 60);
      }
    }
    // Cuando el flujo reciba la respuesta de MIRA, llama: addAssistantMessage(respuesta);
  </script>
</body>
</html>
